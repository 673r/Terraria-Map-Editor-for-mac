<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:c="clr-namespace:TEdit5.Controls"
             xmlns:vm="using:TEdit5.ViewModels"
             xmlns:i="https://github.com/projektanker/icons.avalonia"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="TEdit5.Views.DocumentView"
             x:DataType="vm:DocumentViewModel">

	<UserControl.Styles>
		<Style Selector="TextBox.info">
			<Setter Property="Background" Value="#16213e" />
			<Setter Property="Foreground" Value="#94a3b8" />
			<Setter Property="BorderThickness" Value="0" />
			<Setter Property="CornerRadius" Value="4" />
			<Setter Property="Padding" Value="6,3" />
			<Setter Property="FontSize" Value="11" />
			<Setter Property="MinWidth" Value="50" />
			<Setter Property="IsReadOnly" Value="True" />
			<Setter Property="FontFamily" Value="JetBrains Mono, Menlo, Consolas, monospace" />
		</Style>
		<Style Selector="TextBlock.label">
			<Setter Property="FontSize" Value="10" />
			<Setter Property="Foreground" Value="#64748b" />
			<Setter Property="VerticalAlignment" Value="Center" />
		</Style>
	</UserControl.Styles>

	<DockPanel>
		<!-- Minimap at top right -->
		<Border DockPanel.Dock="Top" Background="#12121f" CornerRadius="0,0,6,6" Margin="0,0,0,2" ClipToBounds="True">
			<Grid ColumnDefinitions="*, Auto">
				<!-- Empty space or future toolbar -->
				<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="6" Margin="8,4" VerticalAlignment="Center" />
				<!-- Minimap -->
				<Border Grid.Column="1" CornerRadius="4" Margin="4" ClipToBounds="True" BorderBrush="#2a2a4a" BorderThickness="1">
					<c:SkiaMinimapRenderBox World="{Binding World}" Height="80" Width="240" />
				</Border>
			</Grid>
		</Border>

		<!-- Bottom info bar -->
		<Border DockPanel.Dock="Bottom" Background="#12121f" MinHeight="26" Padding="10,4" CornerRadius="6,6,0,0" Margin="0,2,0,0">
			<StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
				<StackPanel Orientation="Horizontal" Spacing="4">
					<i:Icon Value="mdi-magnify" FontSize="12" Foreground="#64748b" />
					<TextBlock Classes="label" Text="Zoom" />
					<TextBox Classes="info" Text="{Binding Zoom, Mode=TwoWay}" MinWidth="45" />
					<TextBlock Classes="label" Text="%" />
				</StackPanel>
				<Rectangle Width="1" Height="14" Fill="#2a2a4a" />
				<StackPanel Orientation="Horizontal" Spacing="4">
					<i:Icon Value="mdi-crosshairs-gps" FontSize="12" Foreground="#64748b" />
					<TextBlock Classes="label" Text="X" />
					<TextBox Classes="info" Text="{Binding CursorTileCoordinate.X, Mode=TwoWay}" MinWidth="50" />
					<TextBlock Classes="label" Text="Y" />
					<TextBox Classes="info" Text="{Binding CursorTileCoordinate.Y, Mode=TwoWay}" MinWidth="50" />
				</StackPanel>
			</StackPanel>
		</Border>

		<!-- Main render area -->
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="1" />
				<ColumnDefinition Width="1*" />
			</Grid.ColumnDefinitions>
			<c:SkiaWorldRenderBox
				Grid.Column="1"
				World="{Binding World}"
				WorldEditor="{Binding WorldEditor}"
				Zoom="{Binding Zoom, Mode=TwoWay}"
				ActiveTool="{Binding ToolSelection.ActiveTool}"
				MaxZoom="{Binding MaxZoom, Mode=TwoWay}"
				MinZoom="{Binding MinZoom, Mode=TwoWay}"
				WorldCoordinate="{Binding CursorTileCoordinate, Mode=OneWayToSource}"
				SelectionMode="{Binding SelectionMode, Mode=TwoWay}"/>
		</Grid>
	</DockPanel>
</UserControl>
